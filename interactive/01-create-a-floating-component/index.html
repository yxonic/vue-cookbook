<!DOCTYPE html>
<html>
<head><title>Create a floating component</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff">
<link rel="stylesheet" type="text/css" href="/vue-cookbook/assets/01-create-a-floating-component.page.8826e69c.css"><link rel="stylesheet" type="text/css" href="/vue-cookbook/assets/_default.page.client.ts.5fde2695.css"><link rel="modulepreload" as="script" type="text/javascript" href="/vue-cookbook/assets/vendor.081cd380.js"></head>
<body class="antialiased text-gray-900">
  <div id="app"><article class="absolute inset-0 grid grid-cols-[auto,1fr] grid-rows-[auto,1fr]"><div class="w-0 md:w-64 row-span-2 overflow-hidden"><aside class="hidden md:block md:translate-x-0 fixed inset-0 md:w-64 overflow-scroll bg-gray-50 z-10 p-6 transition ease-in-out transform"><div class="flex justify-center"><a href="/vue-cookbook/" class="font-bold"> Vue Cookbook </a><!----></div><hr class="mt-4"><nav class="mt-6 overflow-hidden"><ul class="space-y-4"><li><a href="/vue-cookbook/" class="font-semibold"><!--[--> Introduction <!--]--></a></li><li><div class="font-semibold" href="/content">Content</div></li><li><div class="font-semibold" href="/effects">Effects</div></li><li><div class="font-semibold" href="/layouts">Layouts</div></li><li><div class="font-semibold" href="/interactive">Interactive</div><ul class="ml-4 mt-2 space-y-2 leading-snug"><li><a href="/vue-cookbook/interactive/01-create-a-floating-component" class="text-blue-700 font-medium"><!--[--> Create a floating component <!--]--></a></li></ul></li><li><div class="font-semibold" href="/utilities">Utilities</div><ul class="ml-4 mt-2 space-y-2 leading-snug"><li><a href="/vue-cookbook/utilities/01-assert-with-type-assertion" class=""><!--[--> Assert with type assertion <!--]--></a></li><li><a href="/vue-cookbook/utilities/02-detect-click-outside" class=""><!--[--> Detect click outside <!--]--></a></li><li><a href="/vue-cookbook/utilities/03-pass-data-along-tree" class=""><!--[--> Pass data along tree <!--]--></a></li></ul></li></ul></nav></aside></div><header class="col-start-2 px-6 py-4 flex items-center justify-between"><button class="-ml-2.5 text-2xl font-medium text-gray-400 px-3 py-1 rounded hover:bg-gray-100 focus:outline-none"> ≡ </button><a class="h-6" href="https://github.com/lem0nle/vpage" target="_blank" rel="noopener"><svg class="h-6 text-gray-400 fill-current" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></header><main class="col-start-2 overflow-scroll"><article class="prose mx-auto p-6"><!--[--><!--[--><h1>Create a floating component</h1><h2>Problem</h2><p>You want to show a menu or tooltip like this, after user clicks / hovers a button:</p><div class="relative text-center py-4"><!--[--><div ref_key="reference" class="inline-block"><!--[--><button class="btn">show menu</button><!--]--></div><!----><!--]--></div><h2>Solution</h2><p>Floating components doesn’t disrupt the flow of the main content. Therefore, we actually don’t have to make any modification to the main content. The biggest concerns of building a floating component are about the floating element itself:</p><ol><li>We should decide the position of the floating element relative to the reference element.</li><li>We want to control when and how it appears / disappears.</li></ol><p>For the first concern, there is a dedicated library specifically for floating element positioning called <a href="http://floating-ui.com">Floating UI</a> (formerly <a href="https://popper.js.org">Popper.js</a>). It helps us to calculate the relative position of the floating element to the reference, with a handy collection of positioning strategies supported. While it is good to use it as the documentation demonstrates, we may still want to integrate it into a Vue component, in order to have a more consistent API with better organization and control of logic.</p><h3>Take #1</h3><p>For convenience, we want our Vue component to wrap the reference element, and also be able to write the floating component within it. We can achieve this by using <a href="https://v3.vuejs.org/guide/component-slots.html#named-slots">named slots</a>. The inital API design would be like this:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">relative text-center py-4</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">inline-block btn</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">placement</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">top</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      button</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> #</span><span style="color: #62E884; font-style: italic">floating</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">        &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">tooltip</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;tooltip&lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;/</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">ts</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">setup</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> Float </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">./Float1.vue</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">style</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">postcss</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #62E884; font-style: italic">.btn</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">@apply </span><span style="color: #BF9EEE">px-3</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">py-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">bg-gray-800</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">text-white</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">font-semibold</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">rounded-lg</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">cursor-pointer</span><span style="color: #F6F6F4">;</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #62E884; font-style: italic">.tooltip</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">@apply </span><span style="color: #BF9EEE">px-2</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">py-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">bg-white</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">ring-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">ring-gray-200</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">rounded-lg</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">shadow-sm</span><span style="color: #F6F6F4">;</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">style</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>We write a basic component positioning logic:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">reference</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">v-bind</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">$attrs</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">absolute top-0 left-0 z-auto</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">style</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">{ transform</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #E7EE98">`translate(</span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.x</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px, </span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.y</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px)`</span><span style="color: #F6F6F4"> }</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">  &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">name</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">ts</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">setup</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> { onMounted, ref, reactive, Ref } </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">vue</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  computePosition,</span></span>
<span class="line"><span style="color: #F6F6F4">  getScrollParents,</span></span>
<span class="line"><span style="color: #F6F6F4">  offset,</span></span>
<span class="line"><span style="color: #F6F6F4">  shift,</span></span>
<span class="line"><span style="color: #F6F6F4">} </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">@floating-ui/dom</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> reference</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> floating</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> position </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">reactive</span><span style="color: #F6F6F4">({ x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">, y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4"> })</span></span>
<span class="line"><span style="color: #F286C4">async</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">||</span><span style="color: #F6F6F4"> floating.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> { x, y } </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">await</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">computePosition</span><span style="color: #F6F6F4">(reference.value, floating.value, {</span></span>
<span class="line"><span style="color: #F6F6F4">    placement</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">top</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">,</span></span>
<span class="line"><span style="color: #F6F6F4">    middleware</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> [</span><span style="color: #62E884">offset</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">5</span><span style="color: #F6F6F4">), </span><span style="color: #62E884">shift</span><span style="color: #F6F6F4">()],</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #97E1F1; font-style: italic">Object</span><span style="color: #F6F6F4">.</span><span style="color: #62E884">assign</span><span style="color: #F6F6F4">(position, {</span></span>
<span class="line"><span style="color: #F6F6F4">    x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(x),</span></span>
<span class="line"><span style="color: #F6F6F4">    y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(y),</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #62E884">onMounted</span><span style="color: #F6F6F4">(</span><span style="color: #F286C4">async</span><span style="color: #F6F6F4"> () </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">||</span><span style="color: #F6F6F4"> floating.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">getScrollParents</span><span style="color: #F6F6F4">(reference.value).</span><span style="color: #62E884">forEach</span><span style="color: #F6F6F4">((</span><span style="color: #FFB86C; font-style: italic">el</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">scroll</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">resize</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">})</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>The result looks like:</p><div class="relative text-center py-4"><!--[--><div ref_key="reference" class="inline-block btn" placement="top"><!--[--> button <!--]--></div><div class="absolute top-0 left-0 z-auto" style="transform:translate(0px, 0px);"><!--[--><div class="tooltip">tooltip</div><!--]--></div><!--]--></div><p>Some key features in this implementation:</p><ol><li>We put the floating element intially at top-left corner with <code>position: absolute</code>, to make sure it can be moved correctly and efficiently using CSS transform <code>translate()</code>.</li><li>We use reactive variable <code>position</code> to track position change, and use inline style binding to actually set position. The position is calculated by Floating UI in function <code>update</code>. Notice that we rounded the position for reason described <a href="https://floating-ui.com/docs/misc#subpixel-and-accelerated-positioning">here</a>.</li><li>It is made explicit that the position of the floating element is recalculated whenever the reference element changes position (when scroll or resize happens to one of its ancestors). Details are described <a href="https://floating-ui.com/docs/computePosition#scrollparents">here</a>.</li></ol><h3>Take #2</h3><p>Now we want to control whether the floating element is visible. Our first implementation is a simple one: click to show tooltip, and click outside to hide it.</p><p>Basically, our new component maintains an internal state (<code>visible</code>) for the visibility of the tooltip. On reference element clicking, we modify <code>visible</code> to be true, and register update hooks. We also add a event listener for clicking outside as described <a href="/vue-cookbook/utilities/02-detect-click-outside">here</a>.</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">reference</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">v-bind</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">$attrs</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">click</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">show</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">v-if</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">visible</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">v-click-outside</span><span style="color: #F6F6F4">:</span><span style="color: #62E884; font-style: italic">mouseup</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">hide</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">absolute top-0 left-0</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">style</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">{ transform</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #E7EE98">`translate(</span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.x</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px, </span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.y</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px)`</span><span style="color: #F6F6F4"> }</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">  &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">name</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">ts</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">setup</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> { ref, reactive, Ref, nextTick } </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">vue</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  computePosition,</span></span>
<span class="line"><span style="color: #F6F6F4">  getScrollParents,</span></span>
<span class="line"><span style="color: #F6F6F4">  offset,</span></span>
<span class="line"><span style="color: #F6F6F4">  shift,</span></span>
<span class="line"><span style="color: #F6F6F4">} </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">@floating-ui/dom</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> { Placement } </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">@floating-ui/core</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> props </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">defineProps</span><span style="color: #F6F6F4">&lt;{</span></span>
<span class="line"><span style="color: #F6F6F4">  placement</span><span style="color: #F286C4">?:</span><span style="color: #F6F6F4"> </span><span style="color: #FFB86C; font-style: italic">Placement</span></span>
<span class="line"><span style="color: #F6F6F4">}&gt;()</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> visible </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">false</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> reference</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> floating</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> position </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">reactive</span><span style="color: #F6F6F4">({ x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">, y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">async</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">||</span><span style="color: #F6F6F4"> floating.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> { x, y } </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">await</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">computePosition</span><span style="color: #F6F6F4">(reference.value, floating.value, {</span></span>
<span class="line"><span style="color: #F6F6F4">    placement</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> props.placement,</span></span>
<span class="line"><span style="color: #F6F6F4">    middleware</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> [</span><span style="color: #62E884">offset</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">5</span><span style="color: #F6F6F4">), </span><span style="color: #62E884">shift</span><span style="color: #F6F6F4">()],</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #97E1F1; font-style: italic">Object</span><span style="color: #F6F6F4">.</span><span style="color: #62E884">assign</span><span style="color: #F6F6F4">(position, {</span></span>
<span class="line"><span style="color: #F6F6F4">    x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(x),</span></span>
<span class="line"><span style="color: #F6F6F4">    y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(y),</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">addHooks</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">getScrollParents</span><span style="color: #F6F6F4">(reference.value).</span><span style="color: #62E884">forEach</span><span style="color: #F6F6F4">((</span><span style="color: #FFB86C; font-style: italic">el</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">scroll</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">resize</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">removeHooks</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">getScrollParents</span><span style="color: #F6F6F4">(reference.value).</span><span style="color: #62E884">forEach</span><span style="color: #F6F6F4">((</span><span style="color: #FFB86C; font-style: italic">el</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">removeEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">scroll</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">removeEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">resize</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">show</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (visible.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">true</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  visible.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">true</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">nextTick</span><span style="color: #F6F6F4">(() </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884">addHooks</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">hide</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (visible.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">false</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">removeHooks</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  visible.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">false</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>The result looks like:</p><div class="relative text-center py-4"><!--[--><div ref_key="reference" class="inline-block btn"><!--[--> button <!--]--></div><!----><!--]--></div><h3>Take #3</h3><p>The final version includes more features to make it even more usable:</p><ol><li>We support different types of triggering condition (hover). We do this by attaching hooks to mouseover and mouseleave events.</li><li>We allow the user to access and change the internal visibility state (See <a href="https://v3.vuejs.org/guide/component-slots.html#scoped-slots">scoped slots</a>).</li><li>We support a smooth transition on visibility change. We do this according to <a href="https://v3.vuejs.org/guide/transitions-enterleave.html#custom-transition-classes">Vue documentation</a>.</li></ol><p>The implementation looks like this:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">reference</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">v-bind</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">$attrs</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">click</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">show</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">mouseover</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">onMouseOver</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">mouseleave</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">onMouseLeave</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">  &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">active</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">visible</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">show</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">show</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">hide</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">hide</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">transition</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">enter-active-class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">transition-opacity duration-100 ease-out</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">leave-active-class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">transition-opacity duration-100 ease-out</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">enter-from-class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">opacity-0</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884; font-style: italic">leave-to-class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">opacity-0</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">  &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #F286C4">div</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #62E884; font-style: italic">v-if</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">visible</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #62E884; font-style: italic">ref</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #62E884; font-style: italic">v-click-outside</span><span style="color: #F6F6F4">:</span><span style="color: #62E884; font-style: italic">mouseup</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">hide</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">absolute top-0 left-0</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">style</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">{ transform</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #E7EE98">`translate(</span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.x</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px, </span><span style="color: #F286C4">${</span><span style="color: #F6F6F4">position.y</span><span style="color: #F286C4">}</span><span style="color: #E7EE98">px)`</span><span style="color: #F6F6F4"> }</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">mouseover</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">onMouseOver</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">      </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">mouseleave</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">onMouseLeave</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">    &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;</span><span style="color: #F286C4">slot</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">name</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">floating</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">visible</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">visible</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">show</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">show</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">hide</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">hide</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> /&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">transition</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">ts</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">setup</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> { ref, reactive, Ref, nextTick } </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">vue</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  computePosition,</span></span>
<span class="line"><span style="color: #F6F6F4">  getScrollParents,</span></span>
<span class="line"><span style="color: #F6F6F4">  offset,</span></span>
<span class="line"><span style="color: #F6F6F4">  shift,</span></span>
<span class="line"><span style="color: #F6F6F4">} </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">@floating-ui/dom</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> { Placement } </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">@floating-ui/core</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> props </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">defineProps</span><span style="color: #F6F6F4">&lt;{</span></span>
<span class="line"><span style="color: #F6F6F4">  type</span><span style="color: #F286C4">?:</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">click</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">manual</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F6F6F4">  placement</span><span style="color: #F286C4">?:</span><span style="color: #F6F6F4"> </span><span style="color: #FFB86C; font-style: italic">Placement</span></span>
<span class="line"><span style="color: #F6F6F4">}&gt;()</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> visible </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">false</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> reference</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> floating</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">Ref</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">HTMLElement</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">null</span><span style="color: #F6F6F4">&gt; </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> position </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">reactive</span><span style="color: #F6F6F4">({ x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4">, y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">0</span><span style="color: #F6F6F4"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">async</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">||</span><span style="color: #F6F6F4"> floating.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> { x, y } </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">await</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">computePosition</span><span style="color: #F6F6F4">(reference.value, floating.value, {</span></span>
<span class="line"><span style="color: #F6F6F4">    placement</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> props.placement,</span></span>
<span class="line"><span style="color: #F6F6F4">    middleware</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> [</span><span style="color: #62E884">offset</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">5</span><span style="color: #F6F6F4">), </span><span style="color: #62E884">shift</span><span style="color: #F6F6F4">()],</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #97E1F1; font-style: italic">Object</span><span style="color: #F6F6F4">.</span><span style="color: #62E884">assign</span><span style="color: #F6F6F4">(position, {</span></span>
<span class="line"><span style="color: #F6F6F4">    x</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(x),</span></span>
<span class="line"><span style="color: #F6F6F4">    y</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">Math</span><span style="color: #F6F6F4">.</span><span style="color: #97E1F1">round</span><span style="color: #F6F6F4">(y),</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">addHooks</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">getScrollParents</span><span style="color: #F6F6F4">(reference.value).</span><span style="color: #62E884">forEach</span><span style="color: #F6F6F4">((</span><span style="color: #FFB86C; font-style: italic">el</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">scroll</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">addEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">resize</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">removeHooks</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (reference.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">null</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">getScrollParents</span><span style="color: #F6F6F4">(reference.value).</span><span style="color: #62E884">forEach</span><span style="color: #F6F6F4">((</span><span style="color: #FFB86C; font-style: italic">el</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">removeEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">scroll</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">    el.</span><span style="color: #62E884">removeEventListener</span><span style="color: #F6F6F4">(</span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">resize</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">, update)</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">show</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (visible.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">true</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  visible.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">true</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">nextTick</span><span style="color: #F6F6F4">(() </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884">update</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #62E884">addHooks</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  })</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">hide</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (visible.value </span><span style="color: #F286C4">===</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">false</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">removeHooks</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  visible.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">false</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> protect </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">ref</span><span style="color: #F6F6F4">(</span><span style="color: #BF9EEE">false</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">onMouseOver</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (props.type </span><span style="color: #F286C4">!==</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  protect.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">true</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">show</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">onMouseLeave</span><span style="color: #F6F6F4">() {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (props.type </span><span style="color: #F286C4">!==</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4">) </span><span style="color: #F286C4">return</span></span>
<span class="line"><span style="color: #F6F6F4">  protect.value </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">false</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #97E1F1">setTimeout</span><span style="color: #F6F6F4">(() </span><span style="color: #F286C4">=&gt;</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">    </span><span style="color: #F286C4">if</span><span style="color: #F6F6F4"> (</span><span style="color: #F286C4">!</span><span style="color: #F6F6F4">protect.value) </span><span style="color: #62E884">hide</span><span style="color: #F6F6F4">()</span></span>
<span class="line"><span style="color: #F6F6F4">  }, </span><span style="color: #BF9EEE">50</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>With current implementation, we are able to even implement a nesting menu. We delegate menu show and hide control to the underlying component, while observing the visibility state through slot prop <code>active</code>.</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">relative text-center py-4</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">inline-block</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">placement</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">bottom-start</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> #</span><span style="color: #62E884; font-style: italic">default</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">        &lt;</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">btn</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;show menu&lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">#</span><span style="color: #62E884; font-style: italic">floating</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">root</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">        &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">          &lt;</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">block</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">type</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">placement</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">right-start</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">#</span><span style="color: #62E884; font-style: italic">default</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">props</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;</span><span style="color: #F286C4">button</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">{ </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">bg-gray-100</span><span style="color: #DEE492">&#39;</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> props.active }</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">              &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                menu 1</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> #</span><span style="color: #62E884; font-style: italic">floating</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu -mt-1</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                &lt;</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">block</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">type</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">placement</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">right-start</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                  &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">#</span><span style="color: #62E884; font-style: italic">default</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">props</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                    &lt;</span><span style="color: #F286C4">button</span></span>
<span class="line"><span style="color: #F6F6F4">                      </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">                      </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">props.active </span><span style="color: #F286C4">?</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">bg-gray-100</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">bg-white</span><span style="color: #DEE492">&#39;&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">                    &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                      submenu 1</span></span>
<span class="line"><span style="color: #F6F6F4">                    &lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                  &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F6F6F4">                  &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> #</span><span style="color: #62E884; font-style: italic">floating</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                    &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu -mt-1</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                      &lt;</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">click</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">root.hide</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                        close</span></span>
<span class="line"><span style="color: #F6F6F4">                      &lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                    &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                  &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                &lt;/</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                &lt;</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">@</span><span style="color: #62E884; font-style: italic">click</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">root.hide</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;close&lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">          &lt;/</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">          &lt;</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">block</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">type</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">hover</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">placement</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">right-start</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">#</span><span style="color: #62E884; font-style: italic">default</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">props</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;</span><span style="color: #F286C4">button</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item</span><span style="color: #DEE492">&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">                </span><span style="color: #F286C4">:</span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">props.active </span><span style="color: #F286C4">?</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">bg-gray-100</span><span style="color: #DEE492">&#39;</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">bg-white</span><span style="color: #DEE492">&#39;&quot;</span></span>
<span class="line"><span style="color: #F6F6F4">              &gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                menu 2</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4"> #</span><span style="color: #62E884; font-style: italic">floating</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu -mt-1</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                &lt;</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">class</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">menu-item text-gray-400 cursor-not-allowed</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">                  disabled</span></span>
<span class="line"><span style="color: #F6F6F4">                &lt;/</span><span style="color: #F286C4">button</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">              &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">            &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">          &lt;/</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">        &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">      &lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">    &lt;/</span><span style="color: #97E1F1; font-style: italic">Float</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;/</span><span style="color: #F286C4">div</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">template</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">ts</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">setup</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F286C4">import</span><span style="color: #F6F6F4"> Float </span><span style="color: #F286C4">from</span><span style="color: #F6F6F4"> </span><span style="color: #DEE492">&#39;</span><span style="color: #E7EE98">./Float3.vue</span><span style="color: #DEE492">&#39;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">script</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">style</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">lang</span><span style="color: #F6F6F4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">postcss</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #62E884; font-style: italic">.btn</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">@apply </span><span style="color: #BF9EEE">px-3</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">py-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">bg-gray-800</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">text-white</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">font-semibold</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">rounded-lg</span><span style="color: #F6F6F4">;</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #62E884; font-style: italic">.menu</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">@apply </span><span style="color: #BF9EEE">w-32</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">py-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">bg-white</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">ring-1</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">ring-gray-200</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">rounded</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">shadow-sm</span><span style="color: #F6F6F4">;</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #62E884; font-style: italic">.menu-item</span><span style="color: #F6F6F4"> {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">@apply </span><span style="color: #BF9EEE">inline-block</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">text-left</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">w-full</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">px-2</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">py-1</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1">hover</span><span style="color: #F6F6F4">:</span><span style="color: #BF9EEE">bg-gray-100</span><span style="color: #F6F6F4"> </span><span style="color: #BF9EEE">focus</span><span style="color: #F6F6F4">:</span><span style="color: #BF9EEE">outline-none</span><span style="color: #F6F6F4">;</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">style</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>And the final result looks like this:</p><div class="relative text-center py-4"><!--[--><div ref_key="reference" class="inline-block"><!--[--><button class="btn">show menu</button><!--]--></div><!----><!--]--></div><!--]--><!--]--></article><footer class="h-16"></footer></main></article></div>
<script type="module" src="/vue-cookbook/assets/_default.page.client.ts.b6301580.js"></script><script id="vite-plugin-ssr_pageContext" type="application/json">{"pageContext":{"_pageId":"/src/pages/interactive/01-create-a-floating-component","pageProps":"!undefined","urlParsedServer":{"origin":null,"pathnameWithBaseUrl":"/interactive/01-create-a-floating-component","hasBaseUrl":false,"search":{},"searchString":null,"hash":"","hashString":null,"isPageContextRequest":false,"pathname":"/interactive/01-create-a-floating-component"}}}</script></body>
</html>
