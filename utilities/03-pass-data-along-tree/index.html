<!DOCTYPE html>
<html>
<head><title>Pass data along tree</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#ffffff">
<link rel="stylesheet" type="text/css" href="/vue-cookbook/assets/_default.page.client.ts.5fde2695.css"><link rel="modulepreload" as="script" type="text/javascript" href="/vue-cookbook/assets/vendor.081cd380.js"></head>
<body class="antialiased text-gray-900">
  <div id="app"><article class="absolute inset-0 grid grid-cols-[auto,1fr] grid-rows-[auto,1fr]"><div class="w-0 md:w-64 row-span-2 overflow-hidden"><aside class="hidden md:block md:translate-x-0 fixed inset-0 md:w-64 overflow-scroll bg-gray-50 z-10 p-6 transition ease-in-out transform"><div class="flex justify-center"><a href="/vue-cookbook/" class="font-bold"> Vue Cookbook </a><!----></div><hr class="mt-4"><nav class="mt-6 overflow-hidden"><ul class="space-y-4"><li><a href="/vue-cookbook/" class="font-semibold"><!--[--> Introduction <!--]--></a></li><li><div class="font-semibold" href="/content">Content</div></li><li><div class="font-semibold" href="/effects">Effects</div></li><li><div class="font-semibold" href="/layouts">Layouts</div></li><li><div class="font-semibold" href="/interactive">Interactive</div><ul class="ml-4 mt-2 space-y-2 leading-snug"><li><a href="/vue-cookbook/interactive/01-create-a-floating-component" class=""><!--[--> Create a floating component <!--]--></a></li></ul></li><li><div class="font-semibold" href="/utilities">Utilities</div><ul class="ml-4 mt-2 space-y-2 leading-snug"><li><a href="/vue-cookbook/utilities/01-assert-with-type-assertion" class=""><!--[--> Assert with type assertion <!--]--></a></li><li><a href="/vue-cookbook/utilities/02-detect-click-outside" class=""><!--[--> Detect click outside <!--]--></a></li><li><a href="/vue-cookbook/utilities/03-pass-data-along-tree" class="text-blue-700 font-medium"><!--[--> Pass data along tree <!--]--></a></li></ul></li></ul></nav></aside></div><header class="col-start-2 px-6 py-4 flex items-center justify-between"><button class="-ml-2.5 text-2xl font-medium text-gray-400 px-3 py-1 rounded hover:bg-gray-100 focus:outline-none"> â‰¡ </button><a class="h-6" href="https://github.com/lem0nle/vpage" target="_blank" rel="noopener"><svg class="h-6 text-gray-400 fill-current" aria-hidden="true" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg></a></header><main class="col-start-2 overflow-scroll"><article class="prose mx-auto p-6"><!--[--><!--[--><h1>Pass data along tree</h1><h2>Problem</h2><p>You have a homogeneous component tree (e.g. nested comments, menus), and you want to pass data from parent to children.</p><h2>Solution</h2><p>Typical way of passing data to child components is to use props. However, this would expose implementation details in public API, and sometimes is not what you want. This also requires component user to correctly fill in props, if the component tree is composed by user:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F6F6F4">&lt;</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">title</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">File</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">parent-title</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">File</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">title</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">Open...</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;&lt;/</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">  &lt;</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">parent-title</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">File</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4"> </span><span style="color: #62E884; font-style: italic">title</span><span style="color: #F286C4">=</span><span style="color: #DEE492">&quot;</span><span style="color: #E7EE98">Save...</span><span style="color: #DEE492">&quot;</span><span style="color: #F6F6F4">&gt;&lt;/</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"><span style="color: #F6F6F4">&lt;/</span><span style="color: #F286C4">menu-item</span><span style="color: #F6F6F4">&gt;</span></span>
<span class="line"></span></code></pre></div><p>Another way of passing data is to use provide/inject. To pass data from parent to children, we combine provide and inject in the same function, and put data under the same name:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F286C4">export</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">useParentData</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">T</span><span style="color: #F6F6F4">&gt;(</span><span style="color: #FFB86C; font-style: italic">name</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">string</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">v</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">) {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> s </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">inject</span><span style="color: #F6F6F4">(name, </span><span style="color: #BF9EEE">undefined</span><span style="color: #F6F6F4">)</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">provide</span><span style="color: #F6F6F4">(name, v)</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">return</span><span style="color: #F6F6F4"> s</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span></code></pre></div><p>We can also allow an optional default value with function overloading:</p><div><pre class="shiki" style="background-color: #282A36"><code><span class="line"><span style="color: #F286C4">export</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">useParentData</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">T</span><span style="color: #F6F6F4">&gt;(</span><span style="color: #FFB86C; font-style: italic">name</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">string</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">v</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">)</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">|</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">undefined</span></span>
<span class="line"><span style="color: #F286C4">export</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">useParentData</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">T</span><span style="color: #F6F6F4">&gt;(</span><span style="color: #FFB86C; font-style: italic">name</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">string</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">v</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">defaultValue</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">)</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span></span>
<span class="line"><span style="color: #F286C4">export</span><span style="color: #F6F6F4"> </span><span style="color: #F286C4">function</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">useParentData</span><span style="color: #F6F6F4">&lt;</span><span style="color: #FFB86C; font-style: italic">T</span><span style="color: #F6F6F4">&gt;(</span><span style="color: #FFB86C; font-style: italic">name</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">string</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">v</span><span style="color: #F286C4">:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">, </span><span style="color: #FFB86C; font-style: italic">defaultValue</span><span style="color: #F286C4">?:</span><span style="color: #F6F6F4"> </span><span style="color: #97E1F1; font-style: italic">T</span><span style="color: #F6F6F4">) {</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">const</span><span style="color: #F6F6F4"> s </span><span style="color: #F286C4">=</span><span style="color: #F6F6F4"> </span><span style="color: #62E884">inject</span><span style="color: #F6F6F4">(name, defaultValue)</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #62E884">provide</span><span style="color: #F6F6F4">(name, v)</span></span>
<span class="line"><span style="color: #F6F6F4">  </span><span style="color: #F286C4">return</span><span style="color: #F6F6F4"> s</span></span>
<span class="line"><span style="color: #F6F6F4">}</span></span>
<span class="line"></span></code></pre></div><!--]--><!--]--></article><footer class="h-16"></footer></main></article></div>
<script type="module" src="/vue-cookbook/assets/_default.page.client.ts.b6301580.js"></script><script id="vite-plugin-ssr_pageContext" type="application/json">{"pageContext":{"_pageId":"/src/pages/utilities/03-pass-data-along-tree","pageProps":"!undefined","urlParsedServer":{"origin":null,"pathnameWithBaseUrl":"/utilities/03-pass-data-along-tree","hasBaseUrl":false,"search":{},"searchString":null,"hash":"","hashString":null,"isPageContextRequest":false,"pathname":"/utilities/03-pass-data-along-tree"}}}</script></body>
</html>
